const SJPSDOM_EVENT=new CustomEvent("sjpsdom-event",{bubbles:!0});function getActiveEvents(e){const t=[];for(const n in e)n.startsWith("on")&&e[n]&&t.push(n);return t}function deepCopyWithJSON(e){return JSON.parse(JSON.stringify(e))}function deepEqual(e,t){const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;function r(e){return null!==e&&"object"==typeof e}for(const o of n){const n=e[o],i=t[o],c=r(n)&&r(i);if(c&&!deepEqual(n,i)||!c&&n!==i)return!1}return!0}function E$(e,t,...n){if("string"!=typeof e)throw TypeError("Element name must be a string!");const o=document.createElement(e.toUpperCase());if("string"==typeof t)o.innerText=t;else if(t instanceof Node)o.appendChild(t);else if(Array.isArray(t))n=t.concat(n);else for(let e in t){const n=t[e];switch(e){case"innerText":o.innerText=n;break;case"innerHTML":o.innerHTML=n;break;default:e.startsWith("on")?o[e]=n:o.setAttribute(e,n)}}if(1===n.length&&"string"==typeof n[0])o.innerText=n[0];else for(let e of n)if(Array.isArray(e))for(let t of e)o.appendChild(t);else e&&o.appendChild(e);return o}function T$(e){if("string"!=typeof e)throw TypeError("Text node 'text' must be a string!");return document.createTextNode(e)}function A$(e,t){let n=[];for(let o=0;o<e.length;o++){let r=e[o];n.push(t(r,o,e))}return n}function F$(e,t){let n=[];for(let o=0;o<e.length;o++){let r=e[o];t(r,o,e)&&n.push(r)}return n}function Q$(e,t){return t&&t instanceof Element?t.querySelector(e):document.querySelector(e)||null}function QA$(e,t){return t&&t instanceof Element?t.querySelectorAll(e):document.querySelectorAll(e)}function V$(e,t){let n;return(n=t&&t instanceof Element?t.querySelector(e):document.querySelector(e))?n.value:null}function ID$(e){return document.getElementById(e)}function SETE$(e,t){e.innerHTML=null;const n=Array.isArray(t)?t:[t];for(const t of n)e.appendChild(t)}async function INIT$(e,t,n){const o=document.querySelector(e);if(!o)throw Error("Could not find root element!");let r={};n&&(r="function"==typeof init?await n():n);let i=deepCopyWithJSON(r);if(t.toString().match(/^class/))return INIT_CLASS$(e,t);let c=t(r,i,null);SETE$(o,c);const s=e=>{(()=>!deepEqual(r,i))()&&((()=>{let e=document.activeElement;c=t(r,i,c),SETE$(o,c),e.focus()})(),i=deepCopyWithJSON(r),a())},a=()=>{const e=o.querySelectorAll("*");for(let t of e)for(let e in t)e.match(/^on\w+/)&&t[e]&&!o[e]&&(o[e]=s)};a()}function IMPORT$(...e){Array.isArray(e)&&e.forEach(function(e,t){let n="sjpsdom_import_"+ ++t;document.head.appendChild(E$("script",{id:n,src:e}))})}function LOAD$(cb,onDomContentLoaded){cb&&(onDomContentLoaded?(cb(),document.addEventListener("DOMContentLoaded",async()=>{function sleep(e){return new Promise(t=>setTimeout(t,e))}async function waitScriptLoad(scriptName,varName){let attempts=0;for(;"undefined"===eval(`typeof ${varName}`);){if(attempts++>=10){console.error("sjpsdom import",scriptName,"failed! Did you forget to declare the variable",varName,"(initialized with a value) in",scriptName+".js?");break}await sleep(5)}}for(let e of QA$("script")){let t;if(t=e.id.match(/^sjpsdom_import_\d+/)){let t=e.src.match(/\/(\w+)\.js/)[1],n=t+"_import";await waitScriptLoad(t,n)}}onDomContentLoaded()})):document.addEventListener("DOMContentLoaded",cb))}class DOM_View{constructor(){}generate(){}update(){}}function FIND$(e,t){for(const n of e)if(n instanceof t)return n;return null}function INIT_CLASS$(e,t){const n=document.querySelector(e);if(!n)throw Error("Could not find element with query:",e);let o={},r={},i=new t(o);function c(e){deepEqual(o,r)||(i.update(o),r=deepCopyWithJSON(o))}i.stateChanged=(()=>n.dispatchEvent(SJPSDOM_EVENT)),SETE$(n,i.html),n.addEventListener("sjpsdom-event",c),QA$("*",i.html).forEach(e=>{getActiveEvents(e).forEach(e=>{n[e]||(n[e]=c)})})}